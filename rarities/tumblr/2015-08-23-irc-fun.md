# IRC fun

*This was the end of the tumblr blog. I don't remember if there was any one thing that made me stop posting. There probably wasn't. I continued feeling like shit through the end of that year, until I finally graduated. And then I started doing temp work with Logic Staffing and Norvenco. And then Blake helped me get that job at Lowe's for a while. And then I started working for TCS. Everything with that shitshow happened. And then I moved back to my parents in 2018. Everything with that shitshow happened. And then I started working with Terra Staffing and Infoblox. Everything with that shitshow happened. I keep hoping things will turn around and they just don't.* (2020-07-01)

-----
(2015-08-23, [lethargilistic.tumblr](https://lethargilistic.tumblr.com/post/127379275631/irc-fun))

Today was the first day of my summer vacation, and my roommates were off having adventures far away, so I had the apartment to myself. Naturally, I took advantage of this and holed up in my room most of the day writing Python. First, I was going to try my hand at writing a regular expression engine, but I quickly found myself uninterested in it, for some reason. I ran into trouble immediately because of the wishy-washy way I was treating the difference between regex-direction and text-direction. It’s a project for another day: I wanted to try something wholly new to me. I settled on writing an IRC client, quickly finding a little bit of starter code to get me connected and spent a few hours on it. Didn’t get super far, but I could listen in on a conversation.

In the middle of this project, I took a break and went through some of the IRC channels I lurk in. One of them is #WritingPrompts on Snoonet, which is for the subreddit of the same name. They have a bot in there called gonzobot that runs on [CloudBot](https://github.com/CloudBotIRC/CloudBot). I saw someone type a Perl-style regex substitution and got intrigued. They just did a standard plaintext swap, so I experimented with a quick s/\w+/foo swap. Nothing. Weird, right? Had to look at the code, and, sure enough, the bot was programmed only for direct plaintext swaps. I went to work adding regex functionality and got it working with a little tinkering. Each of the replace function calls could be replaced with methods from the re package directly. While I was working, I also found a case with an exception being thrown that was ruining the bot’s log, and fixed that.

That done, I went to submit the pull request and decided to check the issues in case there was a discussion going on. [There was, indeed.](https://github.com/CloudBotIRC/CloudBot/issues/166) It turns out, this functionality was included in an original implementation of the plug-in, but was later [removed due to security concerns](https://github.com/CloudBotIRC/CloudBot/issues/99). Concerns which seem to no longer be a problem. You see, because Python’s regex engine is regex-directed, it evaluates non-deterministically. That means that it is possible to write expressions so inefficient that they can hog resources on a system like the bot, which can be used for a DoS attack. It seems that Python’s re package [has been updated](https://docs.python.org/3/whatsnew/changelog.html) (filter for “ re “, with spaces) to sanitize these sorts of inputs, though, and my changes don’t hang at all for the sample malicious inputs. Can’t take credit for that, since I had neglected that going into the changes, but the people who write Python itself did the real good work.

So, all things considered, OF COURSE they’d already thought of this. Even if they decide to go with a more complicated solution like farming the regex evaluation to a web API, there are a few improvements I can throw in the pot, so day well spent.

Side note: I also flirted with the idea of making a Skype bot, only to find that the only direct support for Skype’s current API is for Visual BASIC, of all things. So much for that.

Special thanks to Butterfly Boucher and Elle Macho for being my soundtrack today. I love all of her work, and her collaborations. Hoping she comes to Seattle, so I can see her perform live, one day. <3
